(this.webpackJsonpmyread=this.webpackJsonpmyread||[]).push([[0],{27:function(e,t,s){},28:function(e,t,s){},35:function(e,t,s){"use strict";s.r(t);var n=s(1),o=s.n(n),c=s(16),a=s.n(c),i=(s(27),s(20)),r=s(17),l=s(18),h=s(22),b=s(21),d=s(7),j=s(2),u=s(10),f="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var O={Accept:"application/json",Authorization:k},x=function(){return fetch("".concat(f,"/books"),{headers:O}).then((function(e){return e.json()})).then((function(e){return e.books}))},m=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(u.a)(Object(u.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},p=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(u.a)(Object(u.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},v=(s(28),s(0));var g=function(e){return Object(v.jsxs)("div",{className:"book",children:[Object(v.jsxs)("div",{className:"book-top",children:[Object(v.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.book.imageLinks.thumbnail,")")}}),Object(v.jsx)("div",{className:"book-shelf-changer",children:Object(v.jsxs)("select",{defaultValue:e.shelf,onChange:function(t){return e.changeshelf(e.book,t)},children:[Object(v.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(v.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(v.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(v.jsx)("option",{value:"read",children:"Read"}),Object(v.jsx)("option",{value:"none",children:"None"})]})})]}),Object(v.jsx)("div",{className:"book-title",children:e.book.title}),Object(v.jsx)("div",{className:"book-authors",children:e.book.authors})]})};var y=function(e){return Object(v.jsxs)("div",{className:"search-books",children:[Object(v.jsxs)("div",{className:"search-books-bar",children:[Object(v.jsx)(d.b,{to:"/",className:"close-search",onClick:e.handleClose,children:"Close"}),Object(v.jsx)("div",{className:"search-books-input-wrapper",children:Object(v.jsx)("input",{autoFocus:!0,onChange:e.searchInputHandler,value:e.query,type:"text",placeholder:"Search by title or author"})})]}),Object(v.jsx)("div",{className:"search-books-results",children:Object(v.jsx)("ol",{className:"books-grid",children:e.searchBooksList.map((function(t){return Object(v.jsx)("li",{children:Object(v.jsx)(g,{book:t,shelf:"none",changeshelf:e.changeshelf})},t.id)}))})})]})};var N=function(e){return Object(v.jsxs)("div",{className:"list-books",children:[Object(v.jsx)("div",{className:"list-books-title",children:Object(v.jsx)("h1",{children:"MyReads"})}),Object(v.jsx)("div",{className:"list-books-content",children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:e.bookslist.map((function(t){return"currentlyReading"===t.shelf?Object(v.jsx)("li",{children:Object(v.jsx)(g,{book:t,shelf:t.shelf,changeshelf:e.changeshelf})},t.id):null}))})})]}),Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:e.bookslist.map((function(t){return"wantToRead"===t.shelf?Object(v.jsx)("li",{children:Object(v.jsx)(g,{book:t,shelf:t.shelf,changeshelf:e.changeshelf})},t.id):null}))})})]}),Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:e.bookslist.map((function(t){return"read"===t.shelf?Object(v.jsx)("li",{children:Object(v.jsx)(g,{book:t,shelf:t.shelf,changeshelf:e.changeshelf})},t.id):null}))})})]})]})}),Object(v.jsx)("div",{className:"open-search",children:Object(v.jsx)(d.b,{to:"/searchbook",children:"Add a book"})})]})},L=function(e){Object(h.a)(s,e);var t=Object(b.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={query:"",booksList:[],searchBooksList:[]},e.reloadBooks=function(){x().then((function(t){e.setState((function(){return{booksList:t}}))}))},e.changeshelf=function(t,s){var n=s.target.value;m(t,n).then((function(){e.reloadBooks()}))},e.emptyBookList=function(){e.setState((function(){return{searchBooksList:[]}}))},e.handleClose=function(){e.setState({query:"",searchBooksList:[]})},e.searchInputHandler=function(t){e.setState({query:t.target.value,searchBooksList:[]},(function(){var t=new Set(e.state.booksList.map((function(e){return e.id})));e.state.query.length>0?p(e.state.query).then((function(s){s.length>1?e.setState((function(){return{searchBooksList:Object(i.a)(s.filter((function(e){var s=e.id;return!t.has(s)})))}}),(function(){0===e.state.query.length&&e.emptyBookList()})):e.emptyBookList()})):e.emptyBookList()}))},e}return Object(l.a)(s,[{key:"componentDidMount",value:function(){this.reloadBooks()}},{key:"render",value:function(){return Object(v.jsx)(d.a,{children:Object(v.jsx)("div",{className:"app",children:Object(v.jsxs)(j.c,{children:[Object(v.jsx)(j.a,{exact:!0,path:"/",children:Object(v.jsx)(N,{bookslist:this.state.booksList,changeshelf:this.changeshelf})}),Object(v.jsx)(j.a,{path:"/searchbook",children:Object(v.jsx)(y,{query:this.state.query,searchInputHandler:this.searchInputHandler,changeshelf:this.changeshelf,handleClose:this.handleClose,searchBooksList:this.state.searchBooksList})})]})})})}}]),s}(o.a.Component),B=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,36)).then((function(t){var s=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),n(e),o(e),c(e),a(e)}))};a.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(d.a,{children:Object(v.jsx)(L,{})})}),document.getElementById("root")),B()}},[[35,1,2]]]);
//# sourceMappingURL=main.2fd9ac6e.chunk.js.map