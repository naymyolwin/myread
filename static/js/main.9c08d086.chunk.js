(this.webpackJsonpmyread=this.webpackJsonpmyread||[]).push([[0],{26:function(e,t,s){},27:function(e,t,s){},34:function(e,t,s){"use strict";s.r(t);var n=s(1),o=s.n(n),c=s(16),a=s.n(c),i=(s(26),s(7)),l=s(17),r=s(18),h=s(21),d=s(20),b=s(9),j=s(2),u="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:f},O=function(){return fetch("".concat(u,"/books"),{headers:k}).then((function(e){return e.json()})).then((function(e){return e.books}))},x=function(e,t){return fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},k),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},m=function(e){return fetch("".concat(u,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},k),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},g=(s(27),s(0));var p=function(e){var t="imageLinks"in e.book;return Object(g.jsxs)("div",{className:"book",children:[Object(g.jsxs)("div",{className:"book-top",children:[Object(g.jsx)("div",{className:"book-cover",style:null!==e.book.imageLinks?{width:128,height:193,backgroundImage:t?"url(".concat(e.book.imageLinks.thumbnail,")"):null}:{width:128,height:193}}),Object(g.jsx)("div",{className:"book-shelf-changer",children:Object(g.jsxs)("select",{defaultValue:e.shelf,onChange:function(t){return e.changeshelf(e.book,t)},children:[Object(g.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(g.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(g.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(g.jsx)("option",{value:"read",children:"Read"}),Object(g.jsx)("option",{value:"none",children:"None"})]})})]}),Object(g.jsx)("div",{className:"book-title",children:e.book.title}),Object(g.jsx)("div",{className:"book-authors",children:e.book.authors})]})};var v=function(e){return Object(g.jsxs)("div",{className:"search-books",children:[Object(g.jsxs)("div",{className:"search-books-bar",children:[Object(g.jsx)(b.b,{to:"/",className:"close-search",onClick:e.handleClose,children:"Close"}),Object(g.jsx)("div",{className:"search-books-input-wrapper",children:Object(g.jsx)("input",{autoFocus:!0,onChange:e.searchInputHandler,value:e.query,type:"text",placeholder:"Search by title or author"})})]}),Object(g.jsx)("div",{className:"search-books-results",children:Object(g.jsx)("ol",{className:"books-grid",children:e.searchBooksList.map((function(t){return Object(g.jsx)("li",{children:Object(g.jsx)(p,{book:t,shelf:t.shelf?t.shelf:"none",changeshelf:e.changeshelf})},t.id)}))})})]})};var y=function(e){return Object(g.jsxs)("div",{className:"list-books",children:[Object(g.jsx)("div",{className:"list-books-title",children:Object(g.jsx)("h1",{children:"MyReads"})}),Object(g.jsx)("div",{className:"list-books-content",children:Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:"bookshelf",children:[Object(g.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(g.jsx)("div",{className:"bookshelf-books",children:Object(g.jsx)("ol",{className:"books-grid",children:e.bookslist.map((function(t){return"currentlyReading"===t.shelf?Object(g.jsx)("li",{children:Object(g.jsx)(p,{book:t,shelf:t.shelf,changeshelf:e.changeshelf})},t.id):null}))})})]}),Object(g.jsxs)("div",{className:"bookshelf",children:[Object(g.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(g.jsx)("div",{className:"bookshelf-books",children:Object(g.jsx)("ol",{className:"books-grid",children:e.bookslist.map((function(t){return"wantToRead"===t.shelf?Object(g.jsx)("li",{children:Object(g.jsx)(p,{book:t,shelf:t.shelf,changeshelf:e.changeshelf})},t.id):null}))})})]}),Object(g.jsxs)("div",{className:"bookshelf",children:[Object(g.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(g.jsx)("div",{className:"bookshelf-books",children:Object(g.jsx)("ol",{className:"books-grid",children:e.bookslist.map((function(t){return"read"===t.shelf?Object(g.jsx)("li",{children:Object(g.jsx)(p,{book:t,shelf:t.shelf,changeshelf:e.changeshelf})},t.id):null}))})})]})]})}),Object(g.jsx)("div",{className:"open-search",children:Object(g.jsx)(b.b,{to:"/search",children:"Add a book"})})]})},N=function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={query:"",booksList:[],searchBooksList:[]},e.reloadBooks=function(){O().then((function(t){e.setState((function(){return{booksList:t}}))}))},e.changeshelf=function(t,s){var n=s.target.value;x(t,n).then((function(){e.reloadBooks()}))},e.emptyBookList=function(){e.setState((function(){return{searchBooksList:[]}}))},e.handleClose=function(){e.setState({query:"",searchBooksList:[]})},e.searchInputHandler=function(t){e.setState({query:t.target.value,searchBooksList:[]},(function(){e.state.query.length>0?m(e.state.query).then((function(t){console.log(t.length),t.length>1?e.setState((function(){return{searchBooksList:t.map((function(t){return Object(i.a)(Object(i.a)({},t),e.state.booksList.find((function(e){return e.id===t.id})))}))}}),(function(){0===e.state.query.length&&e.emptyBookList()})):e.emptyBookList()})):e.emptyBookList()}))},e}return Object(r.a)(s,[{key:"componentDidMount",value:function(){this.reloadBooks()}},{key:"render",value:function(){return Object(g.jsx)(b.a,{basename:"/myread",children:Object(g.jsx)("div",{className:"app",children:Object(g.jsxs)(j.c,{children:[Object(g.jsx)(j.a,{exact:!0,path:"/",children:Object(g.jsx)(y,{bookslist:this.state.booksList,changeshelf:this.changeshelf})}),Object(g.jsx)(j.a,{path:"/search",children:Object(g.jsx)(v,{query:this.state.query,searchInputHandler:this.searchInputHandler,changeshelf:this.changeshelf,handleClose:this.handleClose,searchBooksList:this.state.searchBooksList})})]})})})}}]),s}(o.a.Component),L=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,35)).then((function(t){var s=t.getCLS,n=t.getFID,o=t.getFCP,c=t.getLCP,a=t.getTTFB;s(e),n(e),o(e),c(e),a(e)}))};a.a.render(Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(N,{})}),document.getElementById("root")),L()}},[[34,1,2]]]);
//# sourceMappingURL=main.9c08d086.chunk.js.map